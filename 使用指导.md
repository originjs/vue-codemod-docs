# vue-codemod



## 介绍

`vue-codemod` 是一个 `Vue2` 升级 `Vue3` 的语法转换工具，能将绝大多数 `Vue2` 语法直接升级成 `Vue3` 语法，然后通过少量的手动修改完成 `Vue2` 到 `Vue3` 的平滑迁移。



> 注意⚠️：由于 [官方仓库](https://github.com/vuejs/vue-codemod) 已经有段时间没有维护了，下面的地址是官方的 `fork` 仓库，我们正在该仓库上继续开发新特性

仓库地址：https://github.com/originjs/vue-codemod





## 转化率



### 数据



### 计算方式





## 使用指引



### 安装

> 正式版本发布时更推荐使用 `npm/yarn` 方式，如果你更想尝鲜，可以使用 `clone` 本地安装方式



+ `npm/yarn` 方式

``` bash
npm install @originjs/vue-codemod -g
//or
yarn global add @originjs/vue-codemod
```

<br>

+ `clone` 安装方式

<br>

1. 从 `github clone` 代码

``` bash
git clone https://github.com/originjs/vue-codemod
```
<br>
2. 安装依赖

``` bash
cd vue-codemod

npm install
//or
yarn install
```
<br>
3. 全局安装

```bash
npm run build
npm install . -g
//or
yarn run build
yarn global add .
```



### 使用

`vue-codemod` 是由一条条转换规则组成，这些转换规则位于 `transformation/index.ts` 和 `vue-transformation/index.ts` 下。

<br>

``` bash
npx vue-codemod <path> -t/-a <transformation params][...additional options]
```

1. <path > 表示执行的路径，可以是文件和文件夹
2. `-t` 表示具体的规则，使用 `-t` 时 `transformation param` 不可省略，`-a` 表示所有规则



+ 执行所有规则

``` bash
npx vue-codemod src -a
```

`src` 指定的是扫描的文件路径，`-a` 表示执行所有的规则转换



+ 执行单条规则

```bash
npx vue-codemod src -t new-global-api
```

`src` 指定的是扫描的文件路径，`-t new-global-api` 表示只执行 `new-global-api` 这条规则。

详细的规则列表在请点击此处



+ 帮助

```bash
npx vue-codemod --help
```



结果如下所示

```bash
npx vue-codemod --help
Usage: vue-codemod [file pattern]

Options:
  -t, --transformation        Name or path of the transformation module [string]
  -p, --params                Custom params to the transformation
  -a, --runAllTransformation  run all transformation module            [boolean]
  -h, --help                  Show help                                [boolean]
  -v, --version               Show version number                      [boolean]

Examples:
  npx vue-codemod ./src -a                  Run all rules to convert all
                                            relevant files in the ./src folder
  npx vue-codemod                           Run slot-attribute rule to convert
  ./src/components/HelloWorld.vue -t        HelloWorld.vue
  slot-attribute
```





## 规则清单

| 规则名称                          | 描述或链接                                                   |
| --------------------------------- | ------------------------------------------------------------ |
| new-component-api                 | https://v3.vuejs.org/guide/migration/global-api.html#a-new-global-api-createapp |
| vue-class-component-v8            | https://github.com/vuejs/vue-class-component/issues/406      |
| new-global-api                    | https://v3.vuejs.org/guide/migration/global-api.html#a-new-global-api-createapp |
| vue-router-v4                     | https://next.router.vuejs.org/guide/migration/index.html#new-router-becomes-createrouter<br>https://next.router.vuejs.org/guide/migration/index.html#new-history-option-to-replace-mode<br>https://next.router.vuejs.org/guide/migration/index.html#replaced-onready-with-isready |
| vuex-v4                           | new Store (...) => createStore (...)                           |
| define-component                  | Vue.extend (...) => defineComponent (...)                      |
| new-vue-to-create-app             | https://v3.vuejs.org/guide/migration/global-api.html#a-new-global-api-createapp |
| scoped-slots-to-slots             | https://v3.vuejs.org/guide/migration/slots-unification.html#overview |
| new-directive-api                 | https://v3.vuejs.org/guide/migration/custom-directives.html#overview |
| remove-vue-set-and-delete         | https://v3.vuejs.org/guide/migration/introduction.html#removed-apis |
| rename-lifecycle                  | https://v3.vuejs.org/guide/migration/introduction.html#other-minor-changes |
| add-emit-declaration              | https://v3.vuejs.org/guide/migration/emits-option.html#overview |
| tree-shaking                      | https://v3.vuejs.org/guide/migration/global-api-treeshaking.html |
| v-model                           | https://v3.vuejs.org/guide/migration/v-model.html#overview   |
| render-to-resolveComponent        | https://v3.vuejs.org/guide/migration/render-function-api.html#registered-component |
| remove-contextual-h-from-render   | https://v3.vuejs.org/guide/migration/render-function-api.html#render-function-argument |
| remove-production-tip             | https://v3.vuejs.org/guide/migration/global-api.html#a-new-global-api-createapp |
| remove-trivial-root               | createApp ({ render: () => h (App) })  =>  createApp (App)      |
| vue-as-namespace-import           | import Vue from "vue"  => import * as Vue from "vue"         |
| slot-attribute                    | https://vuejs.org/v2/guide/components-slots.html#Deprecated-Syntax |
| slot-default                      | If  component tag did not contain a `<slot>` element, any content provided between its opening and closing tag would be discarded. |
| slot-scope-attribute              | https://vuejs.org/v2/guide/components-slots.html#Scoped-Slots-with-the-slot-scope-Attribute |
| v-for-template-key                | https://v3.vuejs.org/guide/migration/key-attribute.html#overview |
| v-else-if-key                     | https://v3.vuejs.org/guide/migration/key-attribute.html#overview |
| transition-group-root             | https://v3.vuejs.org/guide/migration/transition-group.html#overview |
| v-bind-order-sensitive            | https://v3.vuejs.org/guide/migration/v-bind.html#overview    |
| v-for-v-if-precedence-changed     | https://v3.vuejs.org/guide/migration/v-if-v-for.html#overview |
| remove-listeners                  | https://v3.vuejs.org/guide/migration/listeners-removed.html#overview |
| v-bind-sync                       | https://v3.vuejs.org/guide/migration/v-model.html#overview   |
| remove-v-on-native                | https://v3.vuejs.org/guide/migration/v-on-native-modifier-removed.html#overview |
| router-link-event-tag             | https://next.router.vuejs.org/guide/migration/index.html#removal-of-event-and-tag-props-in-router-link |
| router-link-exact                 | https://next.router.vuejs.org/guide/migration/index.html#removal-of-the-exact-prop-in-router-link |
| router-view-keep-alive-transition | https://next.router.vuejs.org/guide/migration/index.html#router-view-keep-alive-and-transition |